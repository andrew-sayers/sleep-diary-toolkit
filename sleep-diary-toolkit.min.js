/** Sleep Diary Toolkit | Copyright (C) Andrew Sayers | MIT License */
!function(){function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c||a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}return a}()({1:[function(a,b,c){"use strict";function d(a,b){for(var c=new Array(arguments.length-1),d=0,e=2,f=!0;e<arguments.length;)c[d++]=arguments[e++];return new Promise(function(e,g){c[d]=function(a){if(f)if(f=!1,a)g(a);else{for(var b=new Array(arguments.length-1),c=0;c<b.length;)b[c++]=arguments[c];e.apply(null,b)}};try{a.apply(b||null,c)}catch(h){f&&(f=!1,g(h))}})}b.exports=d},{}],2:[function(a,b,c){"use strict";var d=c;d.length=function(a){var b=a.length;if(!b)return 0;for(var c=0;--b%4>1&&"="===a.charAt(b);)++c;return Math.ceil(3*a.length)/4-c};for(var e=new Array(64),f=new Array(123),g=0;64>g;)f[e[g]=26>g?g+65:52>g?g+71:62>g?g-4:g-59|43]=g++;d.encode=function(a,b,c){for(var d,f=null,g=[],h=0,i=0;c>b;){var j=a[b++];switch(i){case 0:g[h++]=e[j>>2],d=(3&j)<<4,i=1;break;case 1:g[h++]=e[d|j>>4],d=(15&j)<<2,i=2;break;case 2:g[h++]=e[d|j>>6],g[h++]=e[63&j],i=0}h>8191&&((f||(f=[])).push(String.fromCharCode.apply(String,g)),h=0)}return i&&(g[h++]=e[d],g[h++]=61,1===i&&(g[h++]=61)),f?(h&&f.push(String.fromCharCode.apply(String,g.slice(0,h))),f.join("")):String.fromCharCode.apply(String,g.slice(0,h))};var h="invalid encoding";d.decode=function(a,b,c){for(var d,e=c,g=0,i=0;i<a.length;){var j=a.charCodeAt(i++);if(61===j&&g>1)break;if(void 0===(j=f[j]))throw Error(h);switch(g){case 0:d=j,g=1;break;case 1:b[c++]=d<<2|(48&j)>>4,d=j,g=2;break;case 2:b[c++]=(15&d)<<4|(60&j)>>2,d=j,g=3;break;case 3:b[c++]=(3&d)<<6|j,g=0}}if(1===g)throw Error(h);return c-e},d.test=function(a){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(a)}},{}],3:[function(a,b,c){"use strict";function d(){this._listeners={}}b.exports=d,d.prototype.on=function(a,b,c){return(this._listeners[a]||(this._listeners[a]=[])).push({fn:b,ctx:c||this}),this},d.prototype.off=function(a,b){if(void 0===a)this._listeners={};else if(void 0===b)this._listeners[a]=[];else for(var c=this._listeners[a],d=0;d<c.length;)c[d].fn===b?c.splice(d,1):++d;return this},d.prototype.emit=function(a){var b=this._listeners[a];if(b){for(var c=[],d=1;d<arguments.length;)c.push(arguments[d++]);for(d=0;d<b.length;)b[d].fn.apply(b[d++].ctx,c)}return this}},{}],4:[function(a,b,c){"use strict";function d(a){return"undefined"!=typeof Float32Array?function(){function b(a,b,c){f[0]=a,b[c]=g[0],b[c+1]=g[1],b[c+2]=g[2],b[c+3]=g[3]}function c(a,b,c){f[0]=a,b[c]=g[3],b[c+1]=g[2],b[c+2]=g[1],b[c+3]=g[0]}function d(a,b){return g[0]=a[b],g[1]=a[b+1],g[2]=a[b+2],g[3]=a[b+3],f[0]}function e(a,b){return g[3]=a[b],g[2]=a[b+1],g[1]=a[b+2],g[0]=a[b+3],f[0]}var f=new Float32Array([-0]),g=new Uint8Array(f.buffer),h=128===g[3];a.writeFloatLE=h?b:c,a.writeFloatBE=h?c:b,a.readFloatLE=h?d:e,a.readFloatBE=h?e:d}():function(){function b(a,b,c,d){var e=0>b?1:0;if(e&&(b=-b),0===b)a(1/b>0?0:2147483648,c,d);else if(isNaN(b))a(2143289344,c,d);else if(b>3.4028234663852886e38)a((e<<31|2139095040)>>>0,c,d);else if(1.1754943508222875e-38>b)a((e<<31|Math.round(b/1.401298464324817e-45))>>>0,c,d);else{var f=Math.floor(Math.log(b)/Math.LN2),g=8388607&Math.round(b*Math.pow(2,-f)*8388608);a((e<<31|f+127<<23|g)>>>0,c,d)}}function c(a,b,c){var d=a(b,c),e=2*(d>>31)+1,f=d>>>23&255,g=8388607&d;return 255===f?g?NaN:e*(1/0):0===f?1.401298464324817e-45*e*g:e*Math.pow(2,f-150)*(g+8388608)}a.writeFloatLE=b.bind(null,e),a.writeFloatBE=b.bind(null,f),a.readFloatLE=c.bind(null,g),a.readFloatBE=c.bind(null,h)}(),"undefined"!=typeof Float64Array?function(){function b(a,b,c){f[0]=a,b[c]=g[0],b[c+1]=g[1],b[c+2]=g[2],b[c+3]=g[3],b[c+4]=g[4],b[c+5]=g[5],b[c+6]=g[6],b[c+7]=g[7]}function c(a,b,c){f[0]=a,b[c]=g[7],b[c+1]=g[6],b[c+2]=g[5],b[c+3]=g[4],b[c+4]=g[3],b[c+5]=g[2],b[c+6]=g[1],b[c+7]=g[0]}function d(a,b){return g[0]=a[b],g[1]=a[b+1],g[2]=a[b+2],g[3]=a[b+3],g[4]=a[b+4],g[5]=a[b+5],g[6]=a[b+6],g[7]=a[b+7],f[0]}function e(a,b){return g[7]=a[b],g[6]=a[b+1],g[5]=a[b+2],g[4]=a[b+3],g[3]=a[b+4],g[2]=a[b+5],g[1]=a[b+6],g[0]=a[b+7],f[0]}var f=new Float64Array([-0]),g=new Uint8Array(f.buffer),h=128===g[7];a.writeDoubleLE=h?b:c,a.writeDoubleBE=h?c:b,a.readDoubleLE=h?d:e,a.readDoubleBE=h?e:d}():function(){function b(a,b,c,d,e,f){var g=0>d?1:0;if(g&&(d=-d),0===d)a(0,e,f+b),a(1/d>0?0:2147483648,e,f+c);else if(isNaN(d))a(0,e,f+b),a(2146959360,e,f+c);else if(d>1.7976931348623157e308)a(0,e,f+b),a((g<<31|2146435072)>>>0,e,f+c);else{var h;if(2.2250738585072014e-308>d)h=d/5e-324,a(h>>>0,e,f+b),a((g<<31|h/4294967296)>>>0,e,f+c);else{var i=Math.floor(Math.log(d)/Math.LN2);1024===i&&(i=1023),h=d*Math.pow(2,-i),a(4503599627370496*h>>>0,e,f+b),a((g<<31|i+1023<<20|1048576*h&1048575)>>>0,e,f+c)}}}function c(a,b,c,d,e){var f=a(d,e+b),g=a(d,e+c),h=2*(g>>31)+1,i=g>>>20&2047,j=4294967296*(1048575&g)+f;return 2047===i?j?NaN:h*(1/0):0===i?5e-324*h*j:h*Math.pow(2,i-1075)*(j+4503599627370496)}a.writeDoubleLE=b.bind(null,e,0,4),a.writeDoubleBE=b.bind(null,f,4,0),a.readDoubleLE=c.bind(null,g,0,4),a.readDoubleBE=c.bind(null,h,4,0)}(),a}function e(a,b,c){b[c]=255&a,b[c+1]=a>>>8&255,b[c+2]=a>>>16&255,b[c+3]=a>>>24}function f(a,b,c){b[c]=a>>>24,b[c+1]=a>>>16&255,b[c+2]=a>>>8&255,b[c+3]=255&a}function g(a,b){return(a[b]|a[b+1]<<8|a[b+2]<<16|a[b+3]<<24)>>>0}function h(a,b){return(a[b]<<24|a[b+1]<<16|a[b+2]<<8|a[b+3])>>>0}b.exports=d(d)},{}],5:[function(require,module,exports){"use strict";function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(e){}return null}module.exports=inquire},{}],6:[function(a,b,c){"use strict";function d(a,b,c){var d=c||8192,e=d>>>1,f=null,g=d;return function(c){if(1>c||c>e)return a(c);g+c>d&&(f=a(d),g=0);var h=b.call(f,g,g+=c);return 7&g&&(g=(7|g)+1),h}}b.exports=d},{}],7:[function(a,b,c){"use strict";var d=c;d.length=function(a){for(var b=0,c=0,d=0;d<a.length;++d)c=a.charCodeAt(d),128>c?b+=1:2048>c?b+=2:55296===(64512&c)&&56320===(64512&a.charCodeAt(d+1))?(++d,b+=4):b+=3;return b},d.read=function(a,b,c){var d=c-b;if(1>d)return"";for(var e,f=null,g=[],h=0;c>b;)e=a[b++],128>e?g[h++]=e:e>191&&224>e?g[h++]=(31&e)<<6|63&a[b++]:e>239&&365>e?(e=((7&e)<<18|(63&a[b++])<<12|(63&a[b++])<<6|63&a[b++])-65536,g[h++]=55296+(e>>10),g[h++]=56320+(1023&e)):g[h++]=(15&e)<<12|(63&a[b++])<<6|63&a[b++],h>8191&&((f||(f=[])).push(String.fromCharCode.apply(String,g)),h=0);return f?(h&&f.push(String.fromCharCode.apply(String,g.slice(0,h))),f.join("")):String.fromCharCode.apply(String,g.slice(0,h))},d.write=function(a,b,c){for(var d,e,f=c,g=0;g<a.length;++g)d=a.charCodeAt(g),128>d?b[c++]=d:2048>d?(b[c++]=d>>6|192,b[c++]=63&d|128):55296===(64512&d)&&56320===(64512&(e=a.charCodeAt(g+1)))?(d=65536+((1023&d)<<10)+(1023&e),++g,b[c++]=d>>18|240,b[c++]=d>>12&63|128,b[c++]=d>>6&63|128,b[c++]=63&d|128):(b[c++]=d>>12|224,b[c++]=d>>6&63|128,b[c++]=63&d|128);return c-f}},{}],8:[function(a,b,c){"use strict";b.exports=a("./src/index-minimal")},{"./src/index-minimal":9}],9:[function(a,b,c){"use strict";function d(){e.util._configure(),e.Writer._configure(e.BufferWriter),e.Reader._configure(e.BufferReader)}var e=c;e.build="minimal",e.Writer=a("./writer"),e.BufferWriter=a("./writer_buffer"),e.Reader=a("./reader"),e.BufferReader=a("./reader_buffer"),e.util=a("./util/minimal"),e.rpc=a("./rpc"),e.roots=a("./roots"),e.configure=d,d()},{"./reader":10,"./reader_buffer":11,"./roots":12,"./rpc":13,"./util/minimal":16,"./writer":17,"./writer_buffer":18}],10:[function(a,b,c){"use strict";function d(a,b){return RangeError("index out of range: "+a.pos+" + "+(b||1)+" > "+a.len)}function e(a){this.buf=a,this.pos=0,this.len=a.length}function f(){var a=new k(0,0),b=0;if(!(this.len-this.pos>4)){for(;3>b;++b){if(this.pos>=this.len)throw d(this);if(a.lo=(a.lo|(127&this.buf[this.pos])<<7*b)>>>0,this.buf[this.pos++]<128)return a}return a.lo=(a.lo|(127&this.buf[this.pos++])<<7*b)>>>0,a}for(;4>b;++b)if(a.lo=(a.lo|(127&this.buf[this.pos])<<7*b)>>>0,this.buf[this.pos++]<128)return a;if(a.lo=(a.lo|(127&this.buf[this.pos])<<28)>>>0,a.hi=(a.hi|(127&this.buf[this.pos])>>4)>>>0,this.buf[this.pos++]<128)return a;if(b=0,this.len-this.pos>4){for(;5>b;++b)if(a.hi=(a.hi|(127&this.buf[this.pos])<<7*b+3)>>>0,this.buf[this.pos++]<128)return a}else for(;5>b;++b){if(this.pos>=this.len)throw d(this);if(a.hi=(a.hi|(127&this.buf[this.pos])<<7*b+3)>>>0,this.buf[this.pos++]<128)return a}throw Error("invalid varint encoding")}function g(a,b){return(a[b-4]|a[b-3]<<8|a[b-2]<<16|a[b-1]<<24)>>>0}function h(){if(this.pos+8>this.len)throw d(this,8);return new k(g(this.buf,this.pos+=4),g(this.buf,this.pos+=4))}b.exports=e;var i,j=a("./util/minimal"),k=j.LongBits,l=j.utf8,m="undefined"!=typeof Uint8Array?function(a){if(a instanceof Uint8Array||Array.isArray(a))return new e(a);throw Error("illegal buffer")}:function(a){if(Array.isArray(a))return new e(a);throw Error("illegal buffer")},n=function(){return j.Buffer?function(a){return(e.create=function(a){return j.Buffer.isBuffer(a)?new i(a):m(a)})(a)}:m};e.create=n(),e.prototype._slice=j.Array.prototype.subarray||j.Array.prototype.slice,e.prototype.uint32=function(){var a=4294967295;return function(){if(a=(127&this.buf[this.pos])>>>0,this.buf[this.pos++]<128)return a;if(a=(a|(127&this.buf[this.pos])<<7)>>>0,this.buf[this.pos++]<128)return a;if(a=(a|(127&this.buf[this.pos])<<14)>>>0,this.buf[this.pos++]<128)return a;if(a=(a|(127&this.buf[this.pos])<<21)>>>0,this.buf[this.pos++]<128)return a;if(a=(a|(15&this.buf[this.pos])<<28)>>>0,this.buf[this.pos++]<128)return a;if((this.pos+=5)>this.len)throw this.pos=this.len,d(this,10);return a}}(),e.prototype.int32=function(){return 0|this.uint32()},e.prototype.sint32=function(){var a=this.uint32();return a>>>1^-(1&a)|0},e.prototype.bool=function(){return 0!==this.uint32()},e.prototype.fixed32=function(){if(this.pos+4>this.len)throw d(this,4);return g(this.buf,this.pos+=4)},e.prototype.sfixed32=function(){if(this.pos+4>this.len)throw d(this,4);return 0|g(this.buf,this.pos+=4)},e.prototype["float"]=function(){if(this.pos+4>this.len)throw d(this,4);var a=j["float"].readFloatLE(this.buf,this.pos);return this.pos+=4,a},e.prototype["double"]=function(){if(this.pos+8>this.len)throw d(this,4);var a=j["float"].readDoubleLE(this.buf,this.pos);return this.pos+=8,a},e.prototype.bytes=function(){var a=this.uint32(),b=this.pos,c=this.pos+a;if(c>this.len)throw d(this,a);return this.pos+=a,Array.isArray(this.buf)?this.buf.slice(b,c):b===c?new this.buf.constructor(0):this._slice.call(this.buf,b,c)},e.prototype.string=function(){var a=this.bytes();return l.read(a,0,a.length)},e.prototype.skip=function(a){if("number"==typeof a){if(this.pos+a>this.len)throw d(this,a);this.pos+=a}else do if(this.pos>=this.len)throw d(this);while(128&this.buf[this.pos++]);return this},e.prototype.skipType=function(a){switch(a){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;4!==(a=7&this.uint32());)this.skipType(a);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+a+" at offset "+this.pos)}return this},e._configure=function(a){i=a,e.create=n(),i._configure();var b=j.Long?"toLong":"toNumber";j.merge(e.prototype,{int64:function(){return f.call(this)[b](!1)},uint64:function(){return f.call(this)[b](!0)},sint64:function(){return f.call(this).zzDecode()[b](!1)},fixed64:function(){return h.call(this)[b](!0)},sfixed64:function(){return h.call(this)[b](!1)}})}},{"./util/minimal":16}],11:[function(a,b,c){"use strict";function d(a){e.call(this,a)}b.exports=d;var e=a("./reader");(d.prototype=Object.create(e.prototype)).constructor=d;var f=a("./util/minimal");d._configure=function(){f.Buffer&&(d.prototype._slice=f.Buffer.prototype.slice)},d.prototype.string=function(){var a=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+a,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+a,this.len))},d._configure()},{"./reader":10,"./util/minimal":16}],12:[function(a,b,c){"use strict";b.exports={}},{}],13:[function(a,b,c){"use strict";var d=c;d.Service=a("./rpc/service")},{"./rpc/service":14}],14:[function(a,b,c){"use strict";function d(a,b,c){if("function"!=typeof a)throw TypeError("rpcImpl must be a function");e.EventEmitter.call(this),this.rpcImpl=a,this.requestDelimited=Boolean(b),this.responseDelimited=Boolean(c)}b.exports=d;var e=a("../util/minimal");(d.prototype=Object.create(e.EventEmitter.prototype)).constructor=d,d.prototype.rpcCall=function f(a,b,c,d,g){if(!d)throw TypeError("request must be specified");var h=this;if(!g)return e.asPromise(f,h,a,b,c,d);if(!h.rpcImpl)return void setTimeout(function(){g(Error("already ended"))},0);try{return h.rpcImpl(a,b[h.requestDelimited?"encodeDelimited":"encode"](d).finish(),function(b,d){if(b)return h.emit("error",b,a),g(b);if(null===d)return void h.end(!0);if(!(d instanceof c))try{d=c[h.responseDelimited?"decodeDelimited":"decode"](d)}catch(b){return h.emit("error",b,a),g(b)}return h.emit("data",d,a),g(null,d)})}catch(i){return h.emit("error",i,a),void setTimeout(function(){g(i)},0)}},d.prototype.end=function(a){return this.rpcImpl&&(a||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}},{"../util/minimal":16}],15:[function(a,b,c){"use strict";function d(a,b){this.lo=a>>>0,this.hi=b>>>0}b.exports=d;var e=a("../util/minimal"),f=d.zero=new d(0,0);f.toNumber=function(){return 0},f.zzEncode=f.zzDecode=function(){return this},f.length=function(){return 1};var g=d.zeroHash="\x00\x00\x00\x00\x00\x00\x00\x00";d.fromNumber=function(a){if(0===a)return f;var b=0>a;b&&(a=-a);var c=a>>>0,e=(a-c)/4294967296>>>0;return b&&(e=~e>>>0,c=~c>>>0,++c>4294967295&&(c=0,++e>4294967295&&(e=0))),new d(c,e)},d.from=function(a){if("number"==typeof a)return d.fromNumber(a);if(e.isString(a)){if(!e.Long)return d.fromNumber(parseInt(a,10));a=e.Long.fromString(a)}return a.low||a.high?new d(a.low>>>0,a.high>>>0):f},d.prototype.toNumber=function(a){if(!a&&this.hi>>>31){var b=~this.lo+1>>>0,c=~this.hi>>>0;return b||(c=c+1>>>0),-(b+4294967296*c)}return this.lo+4294967296*this.hi},d.prototype.toLong=function(a){return e.Long?new e.Long(0|this.lo,0|this.hi,Boolean(a)):{low:0|this.lo,high:0|this.hi,unsigned:Boolean(a)}};var h=String.prototype.charCodeAt;d.fromHash=function(a){return a===g?f:new d((h.call(a,0)|h.call(a,1)<<8|h.call(a,2)<<16|h.call(a,3)<<24)>>>0,(h.call(a,4)|h.call(a,5)<<8|h.call(a,6)<<16|h.call(a,7)<<24)>>>0)},d.prototype.toHash=function(){return String.fromCharCode(255&this.lo,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,255&this.hi,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},d.prototype.zzEncode=function(){var a=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^a)>>>0,this.lo=(this.lo<<1^a)>>>0,this},d.prototype.zzDecode=function(){var a=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^a)>>>0,this.hi=(this.hi>>>1^a)>>>0,this},d.prototype.length=function(){var a=this.lo,b=(this.lo>>>28|this.hi<<4)>>>0,c=this.hi>>>24;return 0===c?0===b?16384>a?128>a?1:2:2097152>a?3:4:16384>b?128>b?5:6:2097152>b?7:8:128>c?9:10}},{"../util/minimal":16}],16:[function(a,b,c){(function(b){(function(){"use strict";function d(a,b,c){for(var d=Object.keys(b),e=0;e<d.length;++e)void 0!==a[d[e]]&&c||(a[d[e]]=b[d[e]]);return a}function e(a){function b(a,c){return this instanceof b?(Object.defineProperty(this,"message",{get:function(){return a}}),Error.captureStackTrace?Error.captureStackTrace(this,b):Object.defineProperty(this,"stack",{value:(new Error).stack||""}),void(c&&d(this,c))):new b(a,c)}return(b.prototype=Object.create(Error.prototype)).constructor=b,Object.defineProperty(b.prototype,"name",{get:function(){return a}}),b.prototype.toString=function(){return this.name+": "+this.message},b}var f=c;f.asPromise=a("@protobufjs/aspromise"),f.base64=a("@protobufjs/base64"),f.EventEmitter=a("@protobufjs/eventemitter"),f["float"]=a("@protobufjs/float"),f.inquire=a("@protobufjs/inquire"),f.utf8=a("@protobufjs/utf8"),f.pool=a("@protobufjs/pool"),f.LongBits=a("./longbits"),f.isNode=Boolean("undefined"!=typeof b&&b&&b.process&&b.process.versions&&b.process.versions.node),f.global=f.isNode&&b||"undefined"!=typeof window&&window||"undefined"!=typeof self&&self||this,f.emptyArray=Object.freeze?Object.freeze([]):[],f.emptyObject=Object.freeze?Object.freeze({}):{},f.isInteger=Number.isInteger||function(a){return"number"==typeof a&&isFinite(a)&&Math.floor(a)===a},f.isString=function(a){return"string"==typeof a||a instanceof String},f.isObject=function(a){return a&&"object"==typeof a},f.isset=f.isSet=function(a,b){var c=a[b];return null!=c&&a.hasOwnProperty(b)?"object"!=typeof c||(Array.isArray(c)?c.length:Object.keys(c).length)>0:!1},f.Buffer=function(){try{var a=f.inquire("buffer").Buffer;return a.prototype.utf8Write?a:null}catch(b){return null}}(),f._Buffer_from=null,f._Buffer_allocUnsafe=null,f.newBuffer=function(a){return"number"==typeof a?f.Buffer?f._Buffer_allocUnsafe(a):new f.Array(a):f.Buffer?f._Buffer_from(a):"undefined"==typeof Uint8Array?a:new Uint8Array(a)},f.Array="undefined"!=typeof Uint8Array?Uint8Array:Array,f.Long=f.global.dcodeIO&&f.global.dcodeIO.Long||f.global.Long||f.inquire("long"),f.key2Re=/^true|false|0|1$/,f.key32Re=/^-?(?:0|[1-9][0-9]*)$/,f.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,f.longToHash=function(a){return a?f.LongBits.from(a).toHash():f.LongBits.zeroHash},f.longFromHash=function(a,b){var c=f.LongBits.fromHash(a);return f.Long?f.Long.fromBits(c.lo,c.hi,b):c.toNumber(Boolean(b))},f.merge=d,f.lcFirst=function(a){return a.charAt(0).toLowerCase()+a.substring(1)},f.newError=e,f.ProtocolError=e("ProtocolError"),f.oneOfGetter=function(a){for(var b={},c=0;c<a.length;++c)b[a[c]]=1;return function(){for(var a=Object.keys(this),c=a.length-1;c>-1;--c)if(1===b[a[c]]&&void 0!==this[a[c]]&&null!==this[a[c]])return a[c]}},f.oneOfSetter=function(a){return function(b){for(var c=0;c<a.length;++c)a[c]!==b&&delete this[a[c]]}},f.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},f._configure=function(){var a=f.Buffer;return a?(f._Buffer_from=a.from!==Uint8Array.from&&a.from||function(b,c){return new a(b,c)},void(f._Buffer_allocUnsafe=a.allocUnsafe||function(b){return new a(b)})):void(f._Buffer_from=f._Buffer_allocUnsafe=null)}}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./longbits":15,"@protobufjs/aspromise":1,"@protobufjs/base64":2,"@protobufjs/eventemitter":3,"@protobufjs/float":4,"@protobufjs/inquire":5,"@protobufjs/pool":6,"@protobufjs/utf8":7}],17:[function(a,b,c){"use strict";function d(a,b,c){this.fn=a,this.len=b,this.next=void 0,this.val=c}function e(){}function f(a){this.head=a.head,this.tail=a.tail,this.len=a.len,this.next=a.states}function g(){this.len=0,this.head=new d(e,0,0),this.tail=this.head,this.states=null}function h(a,b,c){b[c]=255&a}function i(a,b,c){for(;a>127;)b[c++]=127&a|128,a>>>=7;b[c]=a}function j(a,b){this.len=a,this.next=void 0,this.val=b}function k(a,b,c){for(;a.hi;)b[c++]=127&a.lo|128,a.lo=(a.lo>>>7|a.hi<<25)>>>0,a.hi>>>=7;for(;a.lo>127;)b[c++]=127&a.lo|128,a.lo=a.lo>>>7;b[c++]=a.lo}function l(a,b,c){b[c]=255&a,b[c+1]=a>>>8&255,b[c+2]=a>>>16&255,b[c+3]=a>>>24}b.exports=g;var m,n=a("./util/minimal"),o=n.LongBits,p=n.base64,q=n.utf8,r=function(){return n.Buffer?function(){return(g.create=function(){return new m})()}:function(){return new g}};g.create=r(),g.alloc=function(a){return new n.Array(a)},n.Array!==Array&&(g.alloc=n.pool(g.alloc,n.Array.prototype.subarray)),g.prototype._push=function(a,b,c){return this.tail=this.tail.next=new d(a,b,c),this.len+=b,this},j.prototype=Object.create(d.prototype),j.prototype.fn=i,g.prototype.uint32=function(a){return this.len+=(this.tail=this.tail.next=new j((a>>>=0)<128?1:16384>a?2:2097152>a?3:268435456>a?4:5,a)).len,this},g.prototype.int32=function(a){return 0>a?this._push(k,10,o.fromNumber(a)):this.uint32(a)},g.prototype.sint32=function(a){return this.uint32((a<<1^a>>31)>>>0)},g.prototype.uint64=function(a){var b=o.from(a);return this._push(k,b.length(),b)},g.prototype.int64=g.prototype.uint64,g.prototype.sint64=function(a){var b=o.from(a).zzEncode();return this._push(k,b.length(),b)},g.prototype.bool=function(a){return this._push(h,1,a?1:0)},g.prototype.fixed32=function(a){return this._push(l,4,a>>>0)},g.prototype.sfixed32=g.prototype.fixed32,g.prototype.fixed64=function(a){var b=o.from(a);return this._push(l,4,b.lo)._push(l,4,b.hi)},g.prototype.sfixed64=g.prototype.fixed64,g.prototype["float"]=function(a){return this._push(n["float"].writeFloatLE,4,a)},g.prototype["double"]=function(a){return this._push(n["float"].writeDoubleLE,8,a)};var s=n.Array.prototype.set?function(a,b,c){b.set(a,c)}:function(a,b,c){for(var d=0;d<a.length;++d)b[c+d]=a[d]};g.prototype.bytes=function(a){var b=a.length>>>0;if(!b)return this._push(h,1,0);if(n.isString(a)){var c=g.alloc(b=p.length(a));p.decode(a,c,0),a=c}return this.uint32(b)._push(s,b,a)},g.prototype.string=function(a){var b=q.length(a);return b?this.uint32(b)._push(q.write,b,a):this._push(h,1,0)},g.prototype.fork=function(){return this.states=new f(this),this.head=this.tail=new d(e,0,0),this.len=0,this},g.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new d(e,0,0),this.len=0),this},g.prototype.ldelim=function(){var a=this.head,b=this.tail,c=this.len;return this.reset().uint32(c),c&&(this.tail.next=a.next,this.tail=b,this.len+=c),this},g.prototype.finish=function(){for(var a=this.head.next,b=this.constructor.alloc(this.len),c=0;a;)a.fn(a.val,b,c),c+=a.len,a=a.next;return b},g._configure=function(a){m=a,g.create=r(),m._configure()}},{"./util/minimal":16}],18:[function(a,b,c){"use strict";function d(){f.call(this)}function e(a,b,c){a.length<40?g.utf8.write(a,b,c):b.utf8Write?b.utf8Write(a,c):b.write(a,c)}b.exports=d;var f=a("./writer");(d.prototype=Object.create(f.prototype)).constructor=d;var g=a("./util/minimal");d._configure=function(){d.alloc=g._Buffer_allocUnsafe,d.writeBytesBuffer=g.Buffer&&g.Buffer.prototype instanceof Uint8Array&&"set"===g.Buffer.prototype.set.name?function(a,b,c){b.set(a,c)}:function(a,b,c){if(a.copy)a.copy(b,c,0,a.length);else for(var d=0;d<a.length;)b[c++]=a[d++]}},d.prototype.bytes=function(a){g.isString(a)&&(a=g._Buffer_from(a,"base64"));var b=a.length>>>0;return this.uint32(b),b&&this._push(d.writeBytesBuffer,b,a),this},d.prototype.string=function(a){var b=g.Buffer.byteLength(a);return this.uint32(b),b&&this._push(e,b,a),this},d._configure()},{"./util/minimal":16,"./writer":17}],19:[function(a,b,c){"use strict";var d={fix_browser_issues:function(){try{window.onunload=function(){}}catch(a){}},parse_search_params:function(a){var b={};return a.length&&a.substr(1).split("&").forEach(function(a){return a.replace(/^([^=]*)(.*)/,function(a,c,d){d=d.length?d.substr(1):null,b.hasOwnProperty(c)?"string"==typeof b[c]?b[c]=[b[c],d]:b.push(d):b[c]=d})}),b}};if("undefined"!=typeof b&&b.exports){b.exports=d;try{window.browser_utils=d}catch(e){}}},{}],20:[function(a,b,c){"use strict";var d="undefined"!=typeof b&&b.exports?a("protobufjs/minimal"):window.protobuf,e=d.Reader,f=d.Writer,g=d.util,h=d.roots["default"]||(d.roots["default"]={});h.entry_type=function(){function a(a){if(this.privateStorage={},a)for(var b=Object.keys(a),c=0;c<b.length;++c)null!=a[b[c]]&&(this[b[c]]=a[b[c]])}return a.prototype.timestamp=g.Long?g.Long.fromBits(0,0,!0):0,a.prototype.event=0,a.prototype.privateStorage=g.emptyObject,a.prototype.related=g.Long?g.Long.fromBits(0,0,!0):0,a.prototype.comment="",a.create=function(b){return new a(b)},a.encode=function(a,b){if(b||(b=f.create()),null!=a.timestamp&&Object.hasOwnProperty.call(a,"timestamp")&&b.uint32(8).uint64(a.timestamp),null!=a.event&&Object.hasOwnProperty.call(a,"event")&&b.uint32(16).int32(a.event),null!=a.privateStorage&&Object.hasOwnProperty.call(a,"privateStorage"))for(var c=Object.keys(a.privateStorage),d=0;d<c.length;++d)b.uint32(26).fork().uint32(10).string(c[d]).uint32(18).string(a.privateStorage[c[d]]).ldelim();return null!=a.related&&Object.hasOwnProperty.call(a,"related")&&b.uint32(32).uint64(a.related),null!=a.comment&&Object.hasOwnProperty.call(a,"comment")&&b.uint32(42).string(a.comment),b},a.encodeDelimited=function(a,b){return this.encode(a,b).ldelim()},a.decode=function(a,b){a instanceof e||(a=e.create(a));for(var c,d,f=void 0===b?a.len:a.pos+b,i=new h.entry_type;a.pos<f;){var j=a.uint32();switch(j>>>3){case 1:i.timestamp=a.uint64();break;case 2:i.event=a.int32();break;case 3:i.privateStorage===g.emptyObject&&(i.privateStorage={});var k=a.uint32()+a.pos;for(c="",d="";a.pos<k;){var l=a.uint32();switch(l>>>3){case 1:c=a.string();break;case 2:d=a.string();break;default:a.skipType(7&l)}}i.privateStorage[c]=d;break;case 4:i.related=a.uint64();break;case 5:i.comment=a.string();break;default:a.skipType(7&j)}}return i},a.decodeDelimited=function(a){return a instanceof e||(a=new e(a)),this.decode(a,a.uint32())},a.verify=function(a){if("object"!=typeof a||null===a)return"object expected";if(null!=a.timestamp&&a.hasOwnProperty("timestamp")&&!(g.isInteger(a.timestamp)||a.timestamp&&g.isInteger(a.timestamp.low)&&g.isInteger(a.timestamp.high)))return"timestamp: integer|Long expected";if(null!=a.event&&a.hasOwnProperty("event"))switch(a.event){default:return"event: enum value expected";case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:}if(null!=a.privateStorage&&a.hasOwnProperty("privateStorage")){if(!g.isObject(a.privateStorage))return"privateStorage: object expected";for(var b=Object.keys(a.privateStorage),c=0;c<b.length;++c)if(!g.isString(a.privateStorage[b[c]]))return"privateStorage: string{k:string} expected"}return null!=a.related&&a.hasOwnProperty("related")&&!(g.isInteger(a.related)||a.related&&g.isInteger(a.related.low)&&g.isInteger(a.related.high))?"related: integer|Long expected":null!=a.comment&&a.hasOwnProperty("comment")&&!g.isString(a.comment)?"comment: string expected":null},a.fromObject=function(a){if(a instanceof h.entry_type)return a;var b=new h.entry_type;switch(null!=a.timestamp&&(g.Long?(b.timestamp=g.Long.fromValue(a.timestamp)).unsigned=!0:"string"==typeof a.timestamp?b.timestamp=parseInt(a.timestamp,10):"number"==typeof a.timestamp?b.timestamp=a.timestamp:"object"==typeof a.timestamp&&(b.timestamp=new g.LongBits(a.timestamp.low>>>0,a.timestamp.high>>>0).toNumber(!0))),a.event){case"WAKE":case 0:b.event=0;break;case"SLEEP":case 1:b.event=1;break;case"DISRUPTION":case 2:b.event=2;break;case"FOOD":case 3:b.event=3;break;case"DRINK":case 4:b.event=4;break;case"CAFFEINE":case 5:b.event=5;break;case"ALCOHOL":case 6:b.event=6;break;case"BATHROOM":case 7:b.event=7;break;case"BATH":case 8:b.event=8;break;case"RETARGET":case 9:b.event=9;break;case"OTHER":case 10:b.event=10}if(a.privateStorage){if("object"!=typeof a.privateStorage)throw TypeError(".entry_type.privateStorage: object expected");b.privateStorage={};for(var c=Object.keys(a.privateStorage),d=0;d<c.length;++d)b.privateStorage[c[d]]=String(a.privateStorage[c[d]])}return null!=a.related&&(g.Long?(b.related=g.Long.fromValue(a.related)).unsigned=!0:"string"==typeof a.related?b.related=parseInt(a.related,10):"number"==typeof a.related?b.related=a.related:"object"==typeof a.related&&(b.related=new g.LongBits(a.related.low>>>0,a.related.high>>>0).toNumber(!0))),null!=a.comment&&(b.comment=String(a.comment)),b},a.toObject=function(a,b){b||(b={});var c={};if((b.objects||b.defaults)&&(c.privateStorage={}),b.defaults){if(g.Long){var d=new g.Long(0,0,!0);c.timestamp=b.longs===String?d.toString():b.longs===Number?d.toNumber():d}else c.timestamp=b.longs===String?"0":0;if(c.event=b.enums===String?"WAKE":0,g.Long){var d=new g.Long(0,0,!0);c.related=b.longs===String?d.toString():b.longs===Number?d.toNumber():d}else c.related=b.longs===String?"0":0;c.comment=""}null!=a.timestamp&&a.hasOwnProperty("timestamp")&&("number"==typeof a.timestamp?c.timestamp=b.longs===String?String(a.timestamp):a.timestamp:c.timestamp=b.longs===String?g.Long.prototype.toString.call(a.timestamp):b.longs===Number?new g.LongBits(a.timestamp.low>>>0,a.timestamp.high>>>0).toNumber(!0):a.timestamp),null!=a.event&&a.hasOwnProperty("event")&&(c.event=b.enums===String?h.entry_type.event_type[a.event]:a.event);var e;if(a.privateStorage&&(e=Object.keys(a.privateStorage)).length){c.privateStorage={};for(var f=0;f<e.length;++f)c.privateStorage[e[f]]=a.privateStorage[e[f]]}return null!=a.related&&a.hasOwnProperty("related")&&("number"==typeof a.related?c.related=b.longs===String?String(a.related):a.related:c.related=b.longs===String?g.Long.prototype.toString.call(a.related):b.longs===Number?new g.LongBits(a.related.low>>>0,a.related.high>>>0).toNumber(!0):a.related),null!=a.comment&&a.hasOwnProperty("comment")&&(c.comment=a.comment),c},a.prototype.toJSON=function(){return this.constructor.toObject(this,d.util.toJSONOptions)},a.event_type=function(){var a={},b=Object.create(a);return b[a[0]="WAKE"]=0,b[a[1]="SLEEP"]=1,b[a[2]="DISRUPTION"]=2,b[a[3]="FOOD"]=3,b[a[4]="DRINK"]=4,b[a[5]="CAFFEINE"]=5,b[a[6]="ALCOHOL"]=6,b[a[7]="BATHROOM"]=7,b[a[8]="BATH"]=8,b[a[9]="RETARGET"]=9,b[a[10]="OTHER"]=10,b}(),a}(),h.diary_type=function(){function a(a){if(this.entries=[],this.privateStorage={},a)for(var b=Object.keys(a),c=0;c<b.length;++c)null!=a[b[c]]&&(this[b[c]]=a[b[c]])}return a.prototype.entries=g.emptyArray,a.prototype.privateStorage=g.emptyObject,a.prototype.preferredDayLength=g.Long?g.Long.fromBits(0,0,!0):0,a.prototype.server="",a.prototype.serverEntriesSent=g.Long?g.Long.fromBits(0,0,!0):0,a.prototype.serverEntriesOffset=g.Long?g.Long.fromBits(0,0,!0):0,a.create=function(b){return new a(b)},a.encode=function(a,b){if(b||(b=f.create()),null!=a.entries&&a.entries.length)for(var c=0;c<a.entries.length;++c)h.entry_type.encode(a.entries[c],b.uint32(10).fork()).ldelim();if(null!=a.privateStorage&&Object.hasOwnProperty.call(a,"privateStorage"))for(var d=Object.keys(a.privateStorage),c=0;c<d.length;++c)b.uint32(18).fork().uint32(10).string(d[c]).uint32(18).string(a.privateStorage[d[c]]).ldelim();return null!=a.preferredDayLength&&Object.hasOwnProperty.call(a,"preferredDayLength")&&b.uint32(24).uint64(a.preferredDayLength),null!=a.server&&Object.hasOwnProperty.call(a,"server")&&b.uint32(34).string(a.server),null!=a.serverEntriesSent&&Object.hasOwnProperty.call(a,"serverEntriesSent")&&b.uint32(40).uint64(a.serverEntriesSent),null!=a.serverEntriesOffset&&Object.hasOwnProperty.call(a,"serverEntriesOffset")&&b.uint32(48).uint64(a.serverEntriesOffset),b},a.encodeDelimited=function(a,b){return this.encode(a,b).ldelim()},a.decode=function(a,b){a instanceof e||(a=e.create(a));for(var c,d,f=void 0===b?a.len:a.pos+b,i=new h.diary_type;a.pos<f;){var j=a.uint32();switch(j>>>3){case 1:i.entries&&i.entries.length||(i.entries=[]),i.entries.push(h.entry_type.decode(a,a.uint32()));break;case 2:i.privateStorage===g.emptyObject&&(i.privateStorage={});var k=a.uint32()+a.pos;for(c="",d="";a.pos<k;){var l=a.uint32();switch(l>>>3){case 1:c=a.string();break;case 2:d=a.string();break;default:a.skipType(7&l)}}i.privateStorage[c]=d;break;case 3:i.preferredDayLength=a.uint64();break;case 4:i.server=a.string();break;case 5:i.serverEntriesSent=a.uint64();break;case 6:i.serverEntriesOffset=a.uint64();break;default:a.skipType(7&j)}}return i},a.decodeDelimited=function(a){return a instanceof e||(a=new e(a)),this.decode(a,a.uint32())},a.verify=function(a){if("object"!=typeof a||null===a)return"object expected";if(null!=a.entries&&a.hasOwnProperty("entries")){if(!Array.isArray(a.entries))return"entries: array expected";for(var b=0;b<a.entries.length;++b){var c=h.entry_type.verify(a.entries[b]);
if(c)return"entries."+c}}if(null!=a.privateStorage&&a.hasOwnProperty("privateStorage")){if(!g.isObject(a.privateStorage))return"privateStorage: object expected";for(var d=Object.keys(a.privateStorage),b=0;b<d.length;++b)if(!g.isString(a.privateStorage[d[b]]))return"privateStorage: string{k:string} expected"}return null!=a.preferredDayLength&&a.hasOwnProperty("preferredDayLength")&&!(g.isInteger(a.preferredDayLength)||a.preferredDayLength&&g.isInteger(a.preferredDayLength.low)&&g.isInteger(a.preferredDayLength.high))?"preferredDayLength: integer|Long expected":null!=a.server&&a.hasOwnProperty("server")&&!g.isString(a.server)?"server: string expected":null!=a.serverEntriesSent&&a.hasOwnProperty("serverEntriesSent")&&!(g.isInteger(a.serverEntriesSent)||a.serverEntriesSent&&g.isInteger(a.serverEntriesSent.low)&&g.isInteger(a.serverEntriesSent.high))?"serverEntriesSent: integer|Long expected":null!=a.serverEntriesOffset&&a.hasOwnProperty("serverEntriesOffset")&&!(g.isInteger(a.serverEntriesOffset)||a.serverEntriesOffset&&g.isInteger(a.serverEntriesOffset.low)&&g.isInteger(a.serverEntriesOffset.high))?"serverEntriesOffset: integer|Long expected":null},a.fromObject=function(a){if(a instanceof h.diary_type)return a;var b=new h.diary_type;if(a.entries){if(!Array.isArray(a.entries))throw TypeError(".diary_type.entries: array expected");b.entries=[];for(var c=0;c<a.entries.length;++c){if("object"!=typeof a.entries[c])throw TypeError(".diary_type.entries: object expected");b.entries[c]=h.entry_type.fromObject(a.entries[c])}}if(a.privateStorage){if("object"!=typeof a.privateStorage)throw TypeError(".diary_type.privateStorage: object expected");b.privateStorage={};for(var d=Object.keys(a.privateStorage),c=0;c<d.length;++c)b.privateStorage[d[c]]=String(a.privateStorage[d[c]])}return null!=a.preferredDayLength&&(g.Long?(b.preferredDayLength=g.Long.fromValue(a.preferredDayLength)).unsigned=!0:"string"==typeof a.preferredDayLength?b.preferredDayLength=parseInt(a.preferredDayLength,10):"number"==typeof a.preferredDayLength?b.preferredDayLength=a.preferredDayLength:"object"==typeof a.preferredDayLength&&(b.preferredDayLength=new g.LongBits(a.preferredDayLength.low>>>0,a.preferredDayLength.high>>>0).toNumber(!0))),null!=a.server&&(b.server=String(a.server)),null!=a.serverEntriesSent&&(g.Long?(b.serverEntriesSent=g.Long.fromValue(a.serverEntriesSent)).unsigned=!0:"string"==typeof a.serverEntriesSent?b.serverEntriesSent=parseInt(a.serverEntriesSent,10):"number"==typeof a.serverEntriesSent?b.serverEntriesSent=a.serverEntriesSent:"object"==typeof a.serverEntriesSent&&(b.serverEntriesSent=new g.LongBits(a.serverEntriesSent.low>>>0,a.serverEntriesSent.high>>>0).toNumber(!0))),null!=a.serverEntriesOffset&&(g.Long?(b.serverEntriesOffset=g.Long.fromValue(a.serverEntriesOffset)).unsigned=!0:"string"==typeof a.serverEntriesOffset?b.serverEntriesOffset=parseInt(a.serverEntriesOffset,10):"number"==typeof a.serverEntriesOffset?b.serverEntriesOffset=a.serverEntriesOffset:"object"==typeof a.serverEntriesOffset&&(b.serverEntriesOffset=new g.LongBits(a.serverEntriesOffset.low>>>0,a.serverEntriesOffset.high>>>0).toNumber(!0))),b},a.toObject=function(a,b){b||(b={});var c={};if((b.arrays||b.defaults)&&(c.entries=[]),(b.objects||b.defaults)&&(c.privateStorage={}),b.defaults){if(g.Long){var d=new g.Long(0,0,!0);c.preferredDayLength=b.longs===String?d.toString():b.longs===Number?d.toNumber():d}else c.preferredDayLength=b.longs===String?"0":0;if(c.server="",g.Long){var d=new g.Long(0,0,!0);c.serverEntriesSent=b.longs===String?d.toString():b.longs===Number?d.toNumber():d}else c.serverEntriesSent=b.longs===String?"0":0;if(g.Long){var d=new g.Long(0,0,!0);c.serverEntriesOffset=b.longs===String?d.toString():b.longs===Number?d.toNumber():d}else c.serverEntriesOffset=b.longs===String?"0":0}if(a.entries&&a.entries.length){c.entries=[];for(var e=0;e<a.entries.length;++e)c.entries[e]=h.entry_type.toObject(a.entries[e],b)}var f;if(a.privateStorage&&(f=Object.keys(a.privateStorage)).length){c.privateStorage={};for(var e=0;e<f.length;++e)c.privateStorage[f[e]]=a.privateStorage[f[e]]}return null!=a.preferredDayLength&&a.hasOwnProperty("preferredDayLength")&&("number"==typeof a.preferredDayLength?c.preferredDayLength=b.longs===String?String(a.preferredDayLength):a.preferredDayLength:c.preferredDayLength=b.longs===String?g.Long.prototype.toString.call(a.preferredDayLength):b.longs===Number?new g.LongBits(a.preferredDayLength.low>>>0,a.preferredDayLength.high>>>0).toNumber(!0):a.preferredDayLength),null!=a.server&&a.hasOwnProperty("server")&&(c.server=a.server),null!=a.serverEntriesSent&&a.hasOwnProperty("serverEntriesSent")&&("number"==typeof a.serverEntriesSent?c.serverEntriesSent=b.longs===String?String(a.serverEntriesSent):a.serverEntriesSent:c.serverEntriesSent=b.longs===String?g.Long.prototype.toString.call(a.serverEntriesSent):b.longs===Number?new g.LongBits(a.serverEntriesSent.low>>>0,a.serverEntriesSent.high>>>0).toNumber(!0):a.serverEntriesSent),null!=a.serverEntriesOffset&&a.hasOwnProperty("serverEntriesOffset")&&("number"==typeof a.serverEntriesOffset?c.serverEntriesOffset=b.longs===String?String(a.serverEntriesOffset):a.serverEntriesOffset:c.serverEntriesOffset=b.longs===String?g.Long.prototype.toString.call(a.serverEntriesOffset):b.longs===Number?new g.LongBits(a.serverEntriesOffset.low>>>0,a.serverEntriesOffset.high>>>0).toNumber(!0):a.serverEntriesOffset),c},a.prototype.toJSON=function(){return this.constructor.toObject(this,d.util.toJSONOptions)},a}(),h.diary_update_type=function(){function a(a){if(this.entries=[],a)for(var b=Object.keys(a),c=0;c<b.length;++c)null!=a[b[c]]&&(this[b[c]]=a[b[c]])}return a.prototype.entries=g.emptyArray,a.prototype.start=g.Long?g.Long.fromBits(0,0,!0):0,a.prototype.deleteCount=g.Long?g.Long.fromBits(0,0,!0):0,a.prototype.reset=!1,a.create=function(b){return new a(b)},a.encode=function(a,b){if(b||(b=f.create()),null!=a.entries&&a.entries.length)for(var c=0;c<a.entries.length;++c)h.entry_type.encode(a.entries[c],b.uint32(10).fork()).ldelim();return null!=a.start&&Object.hasOwnProperty.call(a,"start")&&b.uint32(16).uint64(a.start),null!=a.deleteCount&&Object.hasOwnProperty.call(a,"deleteCount")&&b.uint32(24).uint64(a.deleteCount),null!=a.reset&&Object.hasOwnProperty.call(a,"reset")&&b.uint32(32).bool(a.reset),b},a.encodeDelimited=function(a,b){return this.encode(a,b).ldelim()},a.decode=function(a,b){a instanceof e||(a=e.create(a));for(var c=void 0===b?a.len:a.pos+b,d=new h.diary_update_type;a.pos<c;){var f=a.uint32();switch(f>>>3){case 1:d.entries&&d.entries.length||(d.entries=[]),d.entries.push(h.entry_type.decode(a,a.uint32()));break;case 2:d.start=a.uint64();break;case 3:d.deleteCount=a.uint64();break;case 4:d.reset=a.bool();break;default:a.skipType(7&f)}}return d},a.decodeDelimited=function(a){return a instanceof e||(a=new e(a)),this.decode(a,a.uint32())},a.verify=function(a){if("object"!=typeof a||null===a)return"object expected";if(null!=a.entries&&a.hasOwnProperty("entries")){if(!Array.isArray(a.entries))return"entries: array expected";for(var b=0;b<a.entries.length;++b){var c=h.entry_type.verify(a.entries[b]);if(c)return"entries."+c}}return null!=a.start&&a.hasOwnProperty("start")&&!(g.isInteger(a.start)||a.start&&g.isInteger(a.start.low)&&g.isInteger(a.start.high))?"start: integer|Long expected":null!=a.deleteCount&&a.hasOwnProperty("deleteCount")&&!(g.isInteger(a.deleteCount)||a.deleteCount&&g.isInteger(a.deleteCount.low)&&g.isInteger(a.deleteCount.high))?"deleteCount: integer|Long expected":null!=a.reset&&a.hasOwnProperty("reset")&&"boolean"!=typeof a.reset?"reset: boolean expected":null},a.fromObject=function(a){if(a instanceof h.diary_update_type)return a;var b=new h.diary_update_type;if(a.entries){if(!Array.isArray(a.entries))throw TypeError(".diary_update_type.entries: array expected");b.entries=[];for(var c=0;c<a.entries.length;++c){if("object"!=typeof a.entries[c])throw TypeError(".diary_update_type.entries: object expected");b.entries[c]=h.entry_type.fromObject(a.entries[c])}}return null!=a.start&&(g.Long?(b.start=g.Long.fromValue(a.start)).unsigned=!0:"string"==typeof a.start?b.start=parseInt(a.start,10):"number"==typeof a.start?b.start=a.start:"object"==typeof a.start&&(b.start=new g.LongBits(a.start.low>>>0,a.start.high>>>0).toNumber(!0))),null!=a.deleteCount&&(g.Long?(b.deleteCount=g.Long.fromValue(a.deleteCount)).unsigned=!0:"string"==typeof a.deleteCount?b.deleteCount=parseInt(a.deleteCount,10):"number"==typeof a.deleteCount?b.deleteCount=a.deleteCount:"object"==typeof a.deleteCount&&(b.deleteCount=new g.LongBits(a.deleteCount.low>>>0,a.deleteCount.high>>>0).toNumber(!0))),null!=a.reset&&(b.reset=Boolean(a.reset)),b},a.toObject=function(a,b){b||(b={});var c={};if((b.arrays||b.defaults)&&(c.entries=[]),b.defaults){if(g.Long){var d=new g.Long(0,0,!0);c.start=b.longs===String?d.toString():b.longs===Number?d.toNumber():d}else c.start=b.longs===String?"0":0;if(g.Long){var d=new g.Long(0,0,!0);c.deleteCount=b.longs===String?d.toString():b.longs===Number?d.toNumber():d}else c.deleteCount=b.longs===String?"0":0;c.reset=!1}if(a.entries&&a.entries.length){c.entries=[];for(var e=0;e<a.entries.length;++e)c.entries[e]=h.entry_type.toObject(a.entries[e],b)}return null!=a.start&&a.hasOwnProperty("start")&&("number"==typeof a.start?c.start=b.longs===String?String(a.start):a.start:c.start=b.longs===String?g.Long.prototype.toString.call(a.start):b.longs===Number?new g.LongBits(a.start.low>>>0,a.start.high>>>0).toNumber(!0):a.start),null!=a.deleteCount&&a.hasOwnProperty("deleteCount")&&("number"==typeof a.deleteCount?c.deleteCount=b.longs===String?String(a.deleteCount):a.deleteCount:c.deleteCount=b.longs===String?g.Long.prototype.toString.call(a.deleteCount):b.longs===Number?new g.LongBits(a.deleteCount.low>>>0,a.deleteCount.high>>>0).toNumber(!0):a.deleteCount),null!=a.reset&&a.hasOwnProperty("reset")&&(c.reset=a.reset),c},a.prototype.toJSON=function(){return this.constructor.toObject(this,d.util.toJSONOptions)},a}(),"undefined"!=typeof b&&b.exports?b.exports=h:window.data_structures=h},{"protobufjs/minimal":8}],21:[function(a,b,c){!function(){"use strict";function c(a){var b,c,d,e=a.indexOf("="),f=a.endsWith("==")?2:a.endsWith("=")?1:0,g=a.length,h=new Uint8Array(3*(g/4)),i=[255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,62,255,255,255,63,52,53,54,55,56,57,58,59,60,61,255,255,255,0,255,255,255,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,255,255,255,255,255,255,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51];if(a.length%4!==0||-1!==e&&e<a.length-2)throw new Error("Unable to parse base64 string.");for(c=0,d=0;g>c;c+=4,d+=3)b=i[a.charCodeAt(c)]<<18|i[a.charCodeAt(c+1)]<<12|i[a.charCodeAt(c+2)]<<6|i[a.charCodeAt(c+3)],h[d]=b>>16,h[d+1]=b>>8&255,h[d+2]=255&b;return h.subarray(0,h.length-f)}function d(a){var b,c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",d="",e=a.length;for(b=2;e>b;b+=3)d+=c[a[b-2]>>2],d+=c[(3&a[b-2])<<4|a[b-1]>>4],d+=c[(15&a[b-1])<<2|a[b]>>6],d+=c[63&a[b]];return b===e+1&&(d+=c[a[b-2]>>2],d+=c[(3&a[b-2])<<4],d+="=="),b===e&&(d+=c[a[b-2]>>2],d+=c[(3&a[b-2])<<4|a[b-1]>>4],d+=c[(15&a[b-1])<<2],d+="="),d}function e(a,b){return d(a.encode(b).finish())}function f(a){if(this.constructed_from_string=void 0!==a,this.server_queue=[],void 0===a){try{window.localStorage}catch(b){throw console.error("localStorage not found - please run this function in a modern web browser"),b}if(a=localStorage.getItem("diary:data"),null===a)return void(this.data=h.diary_type.create({entries:[]}))}"string"==typeof a||a instanceof String?(a=a.replace(/\n+$/,"").replace(/^Diary\(["'](.*)["']\)/,"$1"),this.data=h.diary_type.decode(c(a))):this.data=h.entry_type.create(a)}function g(a,b,c,d){if(void 0===b&&(b=(new Date).getTime()),"string"==typeof a||a instanceof String){var e=f.prototype.event_string_to_id[a.toUpperCase()];if(void 0===e)throw Error("Please pass a known event type, not '"+a+'"');a=e}a||(a=void 0);var g=h.entry_type.create({timestamp:b,event:a,related:c,comment:d}),i=h.entry_type.verify(g);if(i)throw Error(i);return g}var h,i;"undefined"!=typeof b&&b.exports?(h=a("./data_structures"),i=a("./browser_utils")):(h=window.data_structures,i=window.browser_utils),f.prototype._push_server_queue=function(a){this.server_queue.push(a),1==this.server_queue.length&&a.call(this)},f.prototype._pop_server_queue=function(){this.server_queue.shift(),this.server_queue.length&&this.server_queue[0].call(this)},f.prototype.event_string_to_id=h.entry_type.event_type;var j=[];Object.keys(f.prototype.event_string_to_id).forEach(function(a){j[f.prototype.event_string_to_id[a]]=a}),f.prototype.event_id_to_string=j,f.prototype.inverse_of=[],f.prototype.inverse_of[f.prototype.event_string_to_id.WAKE]=f.prototype.event_string_to_id.SLEEP,f.prototype.inverse_of[f.prototype.event_string_to_id.SLEEP]=f.prototype.event_string_to_id.WAKE,f.prototype.serialise=function(){return'Diary("'+e(h.diary_type,this.data)+'")'},f.prototype.save=function(a,b,c){this.constructed_from_string&&!a?(console.warn("Diary was constructed from string - call diary.save(true) if you really want to overwrite your site data"),c&&c()):(this.constructed_from_string=!1,localStorage.setItem("diary:data",this.serialise()),this.data.server?this._push_server_queue(function(){if(this.data.serverEntriesSent<this.data.entries.length){for(var d,f=this,g=new XMLHttpRequest,i=this.data.entries.length-this.data.serverEntriesSent;d=this.data.server+e(h.diary_update_type,{entries:this.data.entries.slice(f.data.serverEntriesSent,f.data.serverEntriesSent+i),start:f.data.serverEntriesSent-this.data.serverEntriesOffset}),!(1==i||d.length<=2048);)i=Math.ceil(i/2);g.onload=function(d){g.status<500?(f.data.serverEntriesSent+=i,f._pop_server_queue(),f.save(a,b,c)):(f._pop_server_queue(),c&&c())},g.onerror=function(a){f._pop_server_queue(),c&&c()},g.open("GET",d),g.send()}else this._pop_server_queue()}):b&&b())},f.prototype.update=function(a){var b=h.diary_update_type.decode(c(a));b.reset&&this.data.entries.splice(0,this.data.entries.length),this.data.entries.splice.apply(this.data.entries,[b.start,b.delete_count].concat(b.entries||[]))},f.prototype.server=function(a,b,c,d){return""===a?(delete this.data.server,this.data.serverEntriesSent=0,this.data.serverEntriesOffset=0,this.save(!1,c,d)):void 0!==a&&(a!=this.data.server||b&&0!=this.data.serverEntriesOffset?this._push_server_queue(function(){var f=this,g=this.target_timestamp(),i=g&&!b?[h.entry_type.create({timestamp:(new Date).getTime(),event:this.event_string_to_id.RETARGET,related:g})]:void 0,j=e(h.diary_update_type,{reset:!0,entries:i}),k=new XMLHttpRequest;k.onload=function(e){k.status<500?(f.data.server=a,b?f.data.serverEntriesSent=f.data.serverEntriesOffset=0:(f.data.serverEntriesSent=f.data.entries.length,f.data.serverEntriesOffset=f.data.entries.length-(g?1:0)),f._pop_server_queue(),f.save(!1,c,d)):(f._pop_server_queue(),d&&d())},k.onerror=function(){f._pop_server_queue(),d&&d()},k.open("GET",a+j),k.send()}):c&&c()),this.data.server},f.prototype.entries=function(){return this.data.entries},f.prototype.preferred_day_length=function(a){return void 0!==a&&(this.data.preferredDayLength=a,this.constructed_from_string||localStorage.setItem("diary:data",this.serialise())),"number"==typeof this.data.preferredDayLength?this.data.preferredDayLength:parseInt(this.data.preferredDayLength,10)},f.prototype.private_storage=function(a){return void 0!==a&&(this.data.privateStorage=a,this.constructed_from_string||localStorage.setItem("diary:data",this.serialise())),this.data.privateStorage},f.prototype.server_entries_offset=function(){return this.data.serverEntriesOffset},f.prototype.server_entries_sent=function(){return this.data.serverEntriesSent},f.prototype.add_entry=function(a,b,c,d,e,f){this.data.entries.push(g(a,b,c,d)),this.save(!1,e,f)},f.prototype.splice_entries=function(a,b,c,d,f){if(c)for(var i=0;i!=c.length;++i)Array.isArray(c[i])&&(c[i]=g.apply(0,c[i]));else c=[];this.data.server&&a+b>this.data.serverEntriesOffset?this._push_server_queue(function(){var g=this,i=Math.max(0,this.data.serverEntriesOffset-a),j=e(h.diary_update_type,{entries:c,start:a-this.data.serverEntriesOffset+i,delete_count:Math.max(0,b-i)}),k=new XMLHttpRequest;k.onload=function(e){k.status<500?(g.data.entries.splice.apply(g.data.entries,[a,b].concat(c)),g.data.serverEntriesSent<a+b&&(g.data.serverEntriesSent=a+b),g._pop_server_queue(),g.save(!1,d,f)):(g._pop_server_queue(),f&&f())},k.onerror=function(){g._pop_server_queue(),f&&f()},k.open("GET",this.data.server+j),k.send()}):(this.data.entries.splice.apply(this.data.entries,[a,b].concat(c)),this.save(!1,d,f))},f.prototype.sleep_wake_periods=function(a){function b(a){function b(a,b){return a+b}function c(a,b){return a-b}var d,e={records:a};if(!a.length)return e;var f=0;for(e.mean=a.reduce(b),e.standard_deviation=0,d=0;d!=a.length;++d)a[d]&&(++f,e.standard_deviation+=Math.pow(a[d]-e.mean,2));e.mean/=f,e.standard_deviation=Math.sqrt(e.standard_deviation/f);var h=a.filter(function(a){return a}).sort(c);e.median=h[Math.floor(h.length/2)],e.interquartile_range=h[Math.ceil(.75*(h.length-1))]-h[Math.ceil(.25*(h.length-1))];var i=h.slice(Math.floor((h.length-1)*(1-g)),Math.ceil((h.length-1)*g+1));if(i.length){for(e.trimmed_mean=i.reduce(b)/i.length,e.trimmed_standard_deviation=0,d=0;d!=i.length;++d)e.trimmed_standard_deviation+=Math.pow(i[d]-e.trimmed_mean,2);e.trimmed_standard_deviation=Math.sqrt(e.trimmed_standard_deviation/i.length)}return e}var c,d,e,f=36e5,g=.8,h=3e4,i=14,j=15*f,k=30*f,l=20*f,m=this,n=[{status:"awake",start_entry:null,end_entry:null,mid_entries:[],target:0}],o=NaN,p=NaN,q=0,r=0,s=[],t=[];this.data.entries.slice(0).sort(function(a,b){return b.timestamp-a.timestamp}).filter(function(a){var b=a.timestamp<o||a.event!=p&&m.inverse_of[a.event]!=p;return o=a.timestamp-h,p=a.event,b}).reverse().forEach(function(b){e="number"==typeof b.timestamp?b.timestamp:parseInt(b.timestamp,10),e>=(a||0)&&(b.event==m.event_string_to_id.WAKE?n.push({status:"awake",start_time:e,start_entry:b,end_entry:null,mid_entries:[],target:n[n.length-1].target}):b.event==m.event_string_to_id.SLEEP?n.push({status:"asleep",start_time:e,start_entry:b,end_entry:null,mid_entries:[],target:n[n.length-1].target}):(b.event==m.event_string_to_id.RETARGET&&(n[n.length-1].target="number"==typeof b.related?b.related:parseInt(b.related,10)),n[n.length-1].mid_entries.push(b)))}),!n[0].mid_entries.length||n.length>i?n.shift():n.length>1&&(n[0].status="asleep"==n[1].status?"awake":"asleep",n[0].is_first_event=!0);for(var u=0;u!=n.length;++u){var v=n[u],w=n[u+1];"awake"==v.status&&v.start_time>q+l&&(++r,v.start_time>q+2*l?++r:s[r]=v.start_time-q,q=v.start_time,v.start_of_new_day=!0),v.day_number=r,w&&("asleep"==v.status?"asleep"==w.status?(v.missing_event_after=!0,v.end_time=Math.min(w.start_time,v.start_time+j)):w.start_time<v.start_time+j?(v.end_time=w.start_time,v.end_entry=w.start_entry,t[r]=Math.max(t[r]||0,w.start_time-v.start_time)):v.end_time=v.start_time+j:"awake"==w.status?(v.missing_event_after=!0,v.end_time=Math.min(w.start_time,v.start_time+k)):w.start_time<v.start_time+k?(v.end_time=w.start_time,v.end_entry=w.start_entry):v.end_time=v.start_time+k)}return c=b(s),d=b(t),c.recommended_average=c.mean,d.recommended_average=d.trimmed_mean,{records:n,day_summary:c,sleep_summary:d}},f.prototype.suggested_day_lengths=function(){var a,b=this.sleep_wake_periods((new Date).getTime()-15552e6),c=b.records,d=this.target_timestamp(),e=this.preferred_day_length()||b.day_summary.recommended_average,f=b.sleep_summary.recommended_average;if(!d&&!e)return void 0;if(!c.length)return a=new Date,a>=d?void 0:[{days_remaining:Math.floor(d-a),bed_time:a+(d-a)%e-f,day_length:e}];if(a=c[c.length-1].start_time+("asleep"==c[c.length-1].status?f:0),!d)return e?[{bed_time:a+e-f,day_length:e}]:void 0;if(a>=d)return void 0;for(var g=d-a,h=g/e,i=[],j=Math.floor(h);j<=Math.ceil(h);++j)if(j>0){var e=g/j;i.push({days_remaining:j,bed_time:a+e-f,day_length:e})}return i.length?i:void 0},f.prototype.target_timestamp=function(){for(var a=this.data.entries.length-1;a>=0;--a)if(this.data.entries[a].event==this.event_string_to_id.RETARGET)return"number"==typeof this.data.entries[a].related?this.data.entries[a].related:parseInt(this.data.entries[a].related,10);return 0},f.prototype.mode=function(){for(var a=this.data.entries.length-1;a>=0;--a)if(this.data.entries[a].event<2)return this.data.entries[a].event;return NaN},f.prototype.toJSON=function(){return JSON.stringify(this.data.toJSON())},f.prototype.toColumns=function(){var a=[["time","event","related time","comment"]];return this.data.entries.forEach(function(b){a.push([b.timestamp,j[b.event],b.related||"",b.comment||""])}),a},f.prototype.toColumnsCalendar=function(){var a=[["Status","Start time","End time","Is the end time accurate?"]];return this.sleep_wake_periods().records.forEach(function(b){a.push([b.status,b.start_time,b.end_time||"",b.end_entry?"YES":"NO"])}),a},"undefined"!=typeof b&&b.exports&&(b.exports=f);try{window.Diary=f}catch(k){}}()},{"./browser_utils":19,"./data_structures":20}]},{},[20,19,21]);